
<html>
<head>
	<title>r3js viewer</title>

	<link rel="stylesheet" type="text/css" href="../../lib/r3js/lib/styles/r3js.css">
	<link rel="stylesheet" type="text/css" href="../../lib/styles/racViewer.css">
	<link rel="stylesheet" type="text/css" href="../../lib/styles/checkbox.css">
	<link rel="stylesheet" type="text/css" href="../../lib/styles/browser.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/controlpanel.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/projections.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/diagnostics.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/blobs.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/procrustes.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/load.css">
    <link rel="stylesheet" type="text/css" href="../../lib/styles/hitable.css">

    <!-- threejs stuff -->
    <script src="../../lib/r3js/lib/threejs/three.min.js"></script>
    <script src="../../lib/r3js/lib/threejs/plugins/Detector.js"></script>
    <script src="../../lib/r3js/lib/threejs/plugins/PLYExporter.js"></script>
    <script src="../../lib/r3js/lib/threejs/plugins/THREE.MeshLine.js"></script>
    <script src="../../lib/r3js/lib/threejs/renderers/CSS2DRenderer_r3js.js"></script>
    <script src="../../lib/r3js/lib/threejs/fonts/helvetiker_regular.typeface.js"></script>
    <script src="../../lib/r3js/lib/threejs/utils/SceneUtils.js"></script>
    <script src="../../lib/r3js/lib/threejs/utils/BufferGeometryUtils.js"></script>
    <!-- line stuff -->
    <script src='../../lib/r3js/lib/threejs/lines/LineSegmentsGeometry.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/LineGeometry.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/WireframeGeometry2.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/LineMaterial.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/LineSegments2.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/Line2.js'></script>
    <script src='../../lib/r3js/lib/threejs/lines/Wireframe.js'></script>
    <!-- r3js stuff -->
    <script src="../../lib/r3js/lib/init.js"></script>
    <script src="../../lib/r3js/lib/functions/utils.js"></script>
    <script src="../../lib/r3js/lib/functions/element.js"></script>
    <script src="../../lib/r3js/lib/functions/element_points.js"></script>
    <script src="../../lib/r3js/lib/functions/element_lines.js"></script>
    <script src="../../lib/r3js/lib/functions/element_gllines.js"></script>
    <script src="../../lib/r3js/lib/functions/element_arrow.js"></script>
    <script src="../../lib/r3js/lib/functions/element_glarrow.js"></script>
    <script src="../../lib/r3js/lib/functions/element_glpoints.js"></script>
    <script src="../../lib/r3js/lib/functions/element_gllines.js"></script>
    <script src="../../lib/r3js/lib/functions/element_sphere.js"></script>
    <script src="../../lib/r3js/lib/functions/element_surface.js"></script>
    <script src="../../lib/r3js/lib/functions/element_grid.js"></script>
    <script src="../../lib/r3js/lib/functions/element_text.js"></script>
    <script src="../../lib/r3js/lib/functions/element_polygon.js"></script>
    <script src="../../lib/r3js/lib/functions/selection.js"></script>
    <script src="../../lib/r3js/lib/functions/viewport.js"></script>
    <script src="../../lib/r3js/lib/functions/buttons.js"></script>
    <script src="../../lib/r3js/lib/functions/navigation.js"></script>
    <script src="../../lib/r3js/lib/functions/save_img.js"></script>
    <script src="../../lib/r3js/lib/functions/camera.js"></script>
    <script src="../../lib/r3js/lib/functions/scene.js"></script>
    <script src="../../lib/r3js/lib/functions/plotting.js"></script>
    <script src="../../lib/r3js/lib/functions/legend.js"></script>
    <script src="../../lib/r3js/lib/functions/events.js"></script>
    <script src="../../lib/r3js/lib/functions/move.js"></script>
    <script src="../../lib/r3js/lib/functions/raytrace.js"></script>
    <script src="../../lib/r3js/lib/functions/renderer.js"></script>
    <script src="../../lib/r3js/lib/functions/lines.js"></script>
    <script src="../../lib/r3js/lib/functions/dynamic.js"></script>
    <script src="../../lib/r3js/lib/functions/toggle.js"></script>
    <script src="../../lib/r3js/lib/functions/api.js"></script>
    <script src="../../lib/r3js/lib/functions/shaders.js"></script>
    <script src="../../lib/r3js/lib/functions/sprites.js"></script>
    <script src="../../lib/r3js/lib/functions/highlight.js"></script>
    <script src="../../lib/r3js/lib/functions/icons.js"></script>
    <script src="../../lib/r3js/lib/functions/load.js"></script>
    <!-- racmacs stuff -->
    <script src="../../lib/init.js"></script>
    <script src="../../lib/functions/utils.js"></script>
    <script src="../../lib/functions/data.js"></script>
    <script src="../../lib/functions/controls.js"></script>
    <script src="../../lib/functions/diagnostics.js"></script>
    <script src="../../lib/functions/agsr.js"></script>
    <script src="../../lib/functions/animation.js"></script>
    <script src="../../lib/functions/dimensions.js"></script>
    <script src="../../lib/functions/hemisphering.js"></script>
    <script src="../../lib/functions/save.js"></script>
    <script src="../../lib/functions/hitable.js"></script>
    <script src="../../lib/functions/grid.js"></script>
    <script src="../../lib/functions/points.js"></script>
    <script src="../../lib/functions/api.js"></script>
    <script src="../../lib/functions/blobs.js"></script>
    <script src="../../lib/functions/load.js"></script>
    <script src="../../lib/functions/procrustes.js"></script>
    <script src="../../lib/functions/selections.js"></script>
    <script src="../../lib/functions/connections.js"></script>
    <script src="../../lib/functions/stress.js"></script>
    <script src="../../lib/functions/drag.js"></script>
    <script src="../../lib/functions/filters.js"></script>
    <script src="../../lib/functions/browser.js"></script>
    <script src="../../lib/functions/graphics.js"></script>
    <script src="../../lib/functions/raytrace.js"></script>
    <script src="../../lib/functions/shortcuts.js"></script>
    <script src="../../lib/functions/buttons.js"></script>
    <script src="../../lib/functions/projections.js"></script>
    <script src="../../lib/functions/icons.js"></script>

    <script src="../data/h3map_withBlobs.js"></script>

	<script>
		window.onload = function() {

			var container = document.getElementById("rac-viewer");
			var mapData = JSON.parse(json_data);
			
			var viewer = new Racmacs.Viewer(container);
			viewer.load(mapData);
            // viewer.controlpanel.tabset.showTab("load");
            // viewer.showHemisphering();
            viewer.controlpanel.tabset.showTab("procrustes");

            viewer.camera.setZoom(0.2);
            viewer.scene.setTranslation([0,0.1,0]);
            viewer.load(mapData, { maintain_viewpoint:true });
            // console.log(viewer.scene.getTranslation());

            // viewer.browsers.antigens.empty();

            // var new_ag_coords = viewer.getAntigenCoords();
            // var new_sr_coords = viewer.getSeraCoords();

            // new_ag_coords = new_ag_coords.map( x => [x[0]+4, x[1]+6] );

            // viewer.animateToCoords({
            //     antigens : new_ag_coords,
            //     sera : new_sr_coords
            // });
			
		};
	</script>
</head>
<body>
	<div id="rac-viewer" style="position: absolute; top: 0px; bottom: 0px; left:0px; right:0px;">
	</div>

    <!-- <div id="rac-viewer" style="width: 45%; height: 600px; display: inline-block;"></div>
	<div id="rac-viewer-2" style="width: 45%; height: 600px; display: inline-block;"></div> -->

</body>
</html>



