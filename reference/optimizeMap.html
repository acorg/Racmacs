<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Optimize an acmap — optimizeMap • Racmacs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Optimize an acmap — optimizeMap"><meta property="og:description" content="Take an acmap object with a table of titer data and perform optimization runs
to try and find the best arrangement of antigens and sera to represent their
antigenic similarity. Optimizations generated from each run with different
random starting conditions will be added to the acmap object."><meta property="og:image" content="https://acorg.github.io/Racmacs/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Racmacs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/acorg/Racmacs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimize an acmap</h1>
    <small class="dont-index">Source: <a href="https://github.com/acorg/Racmacs/blob/HEAD/R/map_optimize.R" class="external-link"><code>R/map_optimize.R</code></a></small>
    <div class="hidden name"><code>optimizeMap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Take an acmap object with a table of titer data and perform optimization runs
to try and find the best arrangement of antigens and sera to represent their
antigenic similarity. Optimizations generated from each run with different
random starting conditions will be added to the acmap object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimizeMap</span><span class="op">(</span></span>
<span>  <span class="va">map</span>,</span>
<span>  <span class="va">number_of_dimensions</span>,</span>
<span>  <span class="va">number_of_optimizations</span>,</span>
<span>  minimum_column_basis <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  fixed_column_bases <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  titer_weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_optimizations <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_convergence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>map</dt>
<dd><p>The acmap data object</p></dd>


<dt>number_of_dimensions</dt>
<dd><p>The number of dimensions for the new map</p></dd>


<dt>number_of_optimizations</dt>
<dd><p>The number of optimization runs to perform</p></dd>


<dt>minimum_column_basis</dt>
<dd><p>The minimum column basis to use (see details)</p></dd>


<dt>fixed_column_bases</dt>
<dd><p>A vector of fixed values to use as column bases
directly, rather than calculating them from the titer table.</p></dd>


<dt>titer_weights</dt>
<dd><p>An optional matrix of weights to assign each titer when optimizing</p></dd>


<dt>sort_optimizations</dt>
<dd><p>Should optimizations be sorted by stress
afterwards?</p></dd>


<dt>check_convergence</dt>
<dd><p>Should a basic check for convergence of lowest stress
optimization runs onto a similar solution be performed.</p></dd>


<dt>verbose</dt>
<dd><p>Should progress messages be reported, see also
<code><a href="RacOptimizer.options.html">RacOptimizer.options()</a></code></p></dd>


<dt>options</dt>
<dd><p>List of named optimizer options, see <code><a href="RacOptimizer.options.html">RacOptimizer.options()</a></code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns the acmap object updated with new optimizations.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is the core function to run map optimizations. In essence, for
each optimization run, points are randomly distributed in n-dimensional
space, the L-BFGS gradient-based optimization algorithm is applied to move
points into an optimal position. Depending on the map, this may not be a
trivial optimization process and results will depend upon the starting
conditions so multiple optimization runs may be required. For a full
explanation see <code><a href="../articles/intro-to-antigenic-cartography.html">vignette("intro-to-antigenic-cartography")</a></code>.</p><div class="section">
<h3 id="minimum-column-basis-and-fixed-column-bases">Minimum column basis and fixed column bases<a class="anchor" aria-label="anchor" href="#minimum-column-basis-and-fixed-column-bases"></a></h3>


<p>Fixed column bases is a vector of fixed column bases for each sera, where
NA is specified (the default) column bases will be calculated according to
the <code>minimum_column_basis</code> setting. Again for a full explanation of column
bases and what they mean see <code><a href="../articles/intro-to-antigenic-cartography.html">vignette("intro-to-antigenic-cartography")</a></code>.</p>
</div>

    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <code><a href="relaxMap.html">relaxMap()</a></code> for optimizing a given optimization starting from
its current coordinates.</p>
<p>Other map optimization functions: 
<code><a href="RacOptimizer.options.html">RacOptimizer.options</a>()</code>,
<code><a href="make.acmap.html">make.acmap</a>()</code>,
<code><a href="moveTrappedPoints.html">moveTrappedPoints</a>()</code>,
<code><a href="randomizeCoords.html">randomizeCoords</a>()</code>,
<code><a href="relaxMapOneStep.html">relaxMapOneStep</a>()</code>,
<code><a href="relaxMap.html">relaxMap</a>()</code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sam Wilks.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

